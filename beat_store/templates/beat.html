{% extends 'master.html' %}

{% block title %}{{video.title}}{% endblock %} <!-- Confirm this is working -->

{% block head %}
<link rel="stylesheet" href="{{url_for('static', filename='styles/beat.css')}}"/>
<link rel="stylesheet" href="{{url_for('static', filename='styles/beatlibrary.css')}}"/>
{% endblock %}

{% block body %}
<h1>{{video.title}}</h1>
<h2>{{video.beat_name}}</h2>
<div>
  {% if video.link_to_mixdowns %}
  ✔ Mixdowns available for instant download
  {% else %}
  Contact me for Mixdown files
  {% endif %}
</div>
<div>
  {% if video.link_to_stems %}
  ✔ Stems available for instant download
  {% else %}
  Contact me if you need the Stems
  {% endif %}
</div>
<!-- <iframe id="youtube-embed" src="https://www.youtube.com/embed/{{video.id}}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe> -->

<div id="youtube-embed">
  <div style="position: relative; padding-bottom: 56.15%; height: 0; overflow: hidden;">
    <iframe 
      style="position: absolute; top: 0; left:0; width: 100%; height: 100%; border: 0; border-radius: 10px;"
      loading="lazy";
      srcdoc="<style>
        * {
        padding: 0;
        margin: 0;
        overflow: hidden;
        }
        
        body, html {
          height: 100%;
        }
        
        img, svg {
          position: absolute;
          width: 100%;
          top: 0;
          bottom: 0;
          margin: auto;
        }
        
        svg {
          filter: drop-shadow(1px 1px 10px hsl(206.5, 70.7%, 8%));
          transition: all 250ms ease-in-out;
        }
        
        body:hover svg {
          filter: drop-shadow(1px 1px 10px hsl(206.5, 0%, 10%));
          transform: scale(1.2);
        }
      </style>
      <a href='https://www.youtube.com/embed/{{video.id}}?autoplay=1'>
        <img src='https://i.ytimg.com/vi/{{video.id}}/maxresdefault.jpg' alt='Coffee Recipe Javascript Project' style='border-radius: 10px;'>
        <svg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 24 24' fill='none' stroke='#ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-play-circle'><circle cx='12' cy='12' r='10'></circle><polygon points='10 8 16 12 10 16 10 8'></polygon></svg>
      </a>
      "
      src="https://www.youtube.com/embed/{{video.id}}" 
      title="Coffee Recipe Javascript Project"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
      allowfullscreen>
    </iframe>
  </div>
</div>  



<form action="{{url_for('paypal.create_order', video_id=video.id, video_title=video.title)}}">
  <button type="submit" onClick="this.form.submit(); this.disabled=true;">Purchase</button>
</form>

<p>{{video.description}}</p>

<!-- <script>
  pageLoaded()
</script> -->
{% endblock %}
